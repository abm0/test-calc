<!DOCTYPE html>
<html>
    <head>
        <title>calc</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="styles.css">
<!--        <script type="text/javascript" src="http://scriptjava.net/source/scriptjava/scriptjava.js"></script>-->
        <script type="text/javascript">
            function Calculator(outputElement) {
                this.outputElement = outputElement;
                this.stack = new Array(0);
                this.trigger = false;

                this.showResult = function(result) {
                    this.outputElement.value = result;
                };

                this.getInputValue = function() {
                    return this.outputElement.value;
                };

                this.onOperation = function(operation) {
                    this.stack.push(this.getInputValue());
                    this.stack.push(operation);
                    this.clearInputValue();
                };

                this.calculate = function() {
                    while (this.stack.length != 1)
                    {
                        var operand1 = this.stack[0];
                        var operand2 = this.stack[2];
                        var operation = this.stack[1];
                        var res;
                        switch (operation) {
                            case ("+"): res = parseInt(operand1) + parseInt(operand2); break
                            case ("-"): res = parseInt(operand1) - parseInt(operand2); break
                            case ("/"): res = parseInt(operand1) / parseInt(operand2); break
                            case ("*"): res = parseInt(operand1) * parseInt(operand2); break
                        }
                        this.stack.splice(0, 2);
                        this.stack[0] = res;
                    }
                    return this.stack[0];
                    this.trigger = true;
                };

                this.clearInputValue = function() {
                    this.outputElement.value = "";
                };

                this.onCalculate = function() {
                    this.stack.push(this.getInputValue());
                    this.clearInputValue();
                    this.showResult(this.calculate());
                    this.stack.splice(0, 1);
                };
            }
//            $$r(function() {
//                c = new Calculator(document.getElementById('exp-input'), document.getElementById('exp-input2'), document.getElementById('exp-input3'));
//            });
            window.onload = function(){
                c = new Calculator(document.getElementById('exp-input'));
            }
            function getValue(value){
                c.outputElement.value += value;
            }
        </script>
    </head>
    <body>
        <div class="calc-block" id="calc1">
            <input type="text" id="exp-input" value="" readonly/>
            <table id="left-col">
                <tbody>
                    <tr>
                        <td><input type="button" value="7" class="num" onclick="getValue(this.value)" /></td>
                        <td><input type="button" value="8" class="num" onclick="getValue(this.value)" /></td>
                        <td><input type="button" value="9" class="num" onclick="getValue(this.value)" /></td>
                    </tr>
                    <tr>
                        <td><input type="button" value="4" class="num" onclick="getValue(this.value)" /></td>
                        <td><input type="button" value="5" class="num" onclick="getValue(this.value)" /></td>
                        <td><input type="button" value="6" class="num" onclick="getValue(this.value)" /></td>
                    </tr>
                    <tr>
                        <td><input type="button" value="1" class="num" onclick="getValue(this.value)" /></td>
                        <td><input type="button" value="2" class="num" onclick="getValue(this.value)"/></td>
                        <td><input type="button" value="3" class="num" onclick="getValue(this.value)" /></td>
                    </tr>
                    <tr>
                        <td><input type="button" id="null" class="large" class="num" value="0" onclick="getValue(this.value)" /></td>
                    </tr>
                </tbody>
            </table>
            <table id="right-col">
                <tbody>
                    <tr>
                        <td><input type="button" value="C" onclick="c.clearInputValue()"/></td>
                        <td><input type="button" value="*" onclick="c.onOperation(this.value)" /></td>
                    </tr>
                    <tr>
                        <td><input type="button" value="-" onclick="c.onOperation(this.value)" /></td>
                        <td><input type="button" value="/" onclick="c.onOperation(this.value)" /></td>
                    </tr>
                    <tr>
                        <td><input type="button" class="large" value="+" onclick="c.onOperation(this.value)"/></td>
                        <td><input type="button" class="large" value="=" onclick="c.onCalculate()"/></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>
